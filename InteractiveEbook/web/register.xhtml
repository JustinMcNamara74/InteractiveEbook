<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>WheeReader - 4J Interactive</title>



    </h:head>
    <h:body style="padding: 60px;">
        <ui:insert name="header" >
            <ui:include src="/template/navbar.xhtml" />
        </ui:insert>

        <b:container>
            <b:panel title="Registration - WheeReader!">
                <h:panelGroup rendered="#{!userBean.loggedIn}">
                    <h:form>
                        <h:panelGrid columns="2" cellpadding="5" cellspacing="5" width="500" style="margin: 0 auto;" title="Login">
                            <h:outputText value="Desired Username:"  style="font-weight: bold;" />
                            <b:inputText value="#{userBean.userName}" maxlength="45" required="true" requiredMessage="Username is required." 
                                         validatorMessage="User name must be between 3-15 characters(a-z, 0-9, and _ or -)">
                                <f:validateRegex pattern="^[A-Za-z0-9_-]{3,15}$"/>
                            </b:inputText>

                            <h:outputText value="Password:"  style="font-weight: bold;" />
                            <h:inputSecret value="#{userBean.password}" maxlength="45" required="true" requiredMessage="Password is required." class="form-control" 
                                           validatorMessage="Passoword only allows A-Z, 0-9 and _ or -">
                                <f:validateRegex pattern="^[A-Za-z0-9_-]{3,15}$"/>
                            </h:inputSecret>

                            <h:outputText value="Confirm Password:"  style="font-weight: bold;" />
                            <h:inputSecret value="#{userBean.confirmedPassword}" maxlength="45" required="true" requiredMessage="Confirmed password is required." class="form-control" style="margin-top:15px; margin-bottom: 15px;"
                                           validatorMessage="Passoword only allows A-Z, 0-9 and _ or -">
                                <f:validateRegex pattern="^[A-Za-z0-9_-]{3,15}$"/>
                            
                            </h:inputSecret>

                            <h:outputText value="Access Code:"  style="font-weight: bold;" />
                            <b:inputText value="#{userBean.accessCode}" maxlength="45" required="true" requiredMessage="Access Code is required."
                                         validatorMessage="Invalid Access Code Length">                     
                                <f:validateRegex pattern="(?=.*\d).{1,20}"/>
                            </b:inputText>

                            <h:outputText value="First Name:"  style="font-weight: bold;" />
                            <b:inputText value="#{userBean.firstName}" maxlength="45" required="true" requiredMessage="First name is required."
                                         validatorMessage="First Name must be between 3 and 20 characters long">
                                <f:validateRegex pattern="[a-zA-Z]{3,20}"/>
                            </b:inputText>

                            <h:outputText value="Middle Initial:"/>
                            <b:inputText value="#{userBean.middle}" maxlength="1" style="width: 40px"
                                         validatorMessage="Middle Initial Too Long">
                               <f:validateRegex pattern="[a-zA-Z]{0,1}"/>
                            </b:inputText>

                            <h:outputText value="Last Name:"  style="font-weight: bold;" />
                            <b:inputText value="#{userBean.lastName}" required="true" maxlength="45" requiredMessage="Last name is required."
                                         validatorMessage="First Name must be between 3 and 20 characters long">
                                <f:validateRegex pattern="[a-zA-Z]{3,20}"/>

                            </b:inputText>

                            <h:outputText value="Email Address:"  style="font-weight: bold;" />

                            <b:inputText required="true" size="40" maxlength="45" 
                                         requiredMessage="Please enter your email address."
                                         validatorMessage="HTML - Invalid email format"
                                         value="#{userBean.email}">

                                <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.(com|net|org|edu)"/>

                            </b:inputText>

                            <h:outputText value="Phone Number:" />
                            <b:inputText value="#{userBean.phone}" maxlength="15" 
                                         validatorMessage="Invalid Phone Number Length">
                                <f:validateRegex pattern="^([+]?[\d]+)?$"/>
                            </b:inputText>

                            <h:outputText value="" />
                            <b:commandButton value="Register" look="primary" action="#{registerBean.register}"/>
                        </h:panelGrid>
                    </h:form>
                </h:panelGroup>

                <h:panelGroup rendered="#{userBean.loggedIn}" style="text-align: center;">
                    <h2>You are registered!</h2>
                </h:panelGroup>

            </b:panel>

            <h:outputText value="#{registerBean.response}" style="color: red;"/>
        </b:container>
    </h:body>
</html>